<div>
    <p-table #dtBillList [columns]="billListColumns" [value]="allBills" [loading]="loading" [scrollable]="true" [scrollHeight]="windowsHeight()">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngFor="let col of columns">
                    {{col.header}}
                </th>
            </tr>   
            <tr>
                <th>
                    <input placeholder="Fatura.No..." class="form-control form-control-sm" type="text" (input)="dtBillList.filter($event.target.value, 'billNumber','contains')">
                </th>
                <th>
                    <input placeholder="Firma..." class="form-control form-control-sm" type="text" (input)="dtBillList.filter($event.target.value, 'customer.companyName','contains')">
                </th>
                <th>
                    <input placeholder="Müşteri..." class="form-control form-control-sm" type="text" (input)="dtBillList.filter($event.target.value, 'customer.customerName','contains')">
                </th>
                <th>
                    <input placeholder="Adres..." class="form-control form-control-sm" type="text" (input)="dtBillList.filter($event.target.value, 'customer.address.street','contains')">
                </th>
                <th></th>
                <th></th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-bill let-columns="columns">
            <tr>
                <td *ngFor="let col of columns" [ngSwitch]="col.field">
                    <span *ngSwitchCase="'billNumber'">{{bill.billNumber}}</span>
                    <span *ngSwitchCase="'companyName'">{{bill.customer.companyName}}</span>
                    <span *ngSwitchCase="'customerName'">{{bill.customer.customerName}} {{bill.customer.lastname}}</span>
                    <span *ngSwitchCase="'address'">{{bill.address.street}} {{bill.address.postCode}} {{bill.address.city.name}}</span>
                    <span *ngSwitchCase="'isPaid'"><p-inputSwitch [(ngModel)]="bill.isPaid" (onChange)="onIsPaidChange(bill)"></p-inputSwitch><span class="isPaid" [ngClass]="bill.isPaid ? 'text-success' : 'text-danger'">{{bill.isPaid?'Ödendi':'Ödenmedi'}}</span> </span>
                    <button *ngSwitchCase="'update'" class="btn btn-success" (click)="updateBill(bill)"><i class="fa fa-pencil"></i>Güncelle</button>
                   <button *ngSwitchCase="'print'" class="btn btn-primary" (click)="onBillPreview(bill)"><a class="fa fa-eye"></a>Önizleme</button>
                   <button *ngSwitchCase="'delete'" class="btn btn-danger" (click)="deleteBill(bill)"><i class="fa fa-times"></i>Sil</button>
                </td>
            </tr>
        </ng-template>
    </p-table>
    
</div>
   

<p-dialog [positionTop]="50" header="Fatura Detayları" [(visible)]="showUpdateBillDialog" (onHide)="onCloseNewBillDialog()" [responsive]="true" showEffect="fade" [modal]="true" width="95%">
    <div>
      
      <app-save-bill [selectedBill]="selectedBill"></app-save-bill>
    </div>
</p-dialog>

<p-dialog [positionTop]="50" header="irsaliye önizleme" [(visible)]="showPrintDialog"  [responsive]="true" showEffect="fade" [modal]="true" width="95%">
        <div>
                <app-bill-print [selectedBill]="selectedBill"></app-bill-print>
          
        </div>
    </p-dialog>

